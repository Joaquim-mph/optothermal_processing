# Global mapping: CSV parameter name -> manifest column name
# Aliases handle naming variations across procedures
# Type is inferred from manifest column name suffix:
#   _v, _V, _nm, _s, _a, _A -> float
#   _step, _period -> float
#   no suffix -> kept as-is from params dict
ManifestColumnMap:
  # Voltage parameters
  vds_v: [VDS, Vds, VSD, Drain voltage]
  vg_fixed_v: [VG, Vg, Gate voltage]
  vg_start_v: [VG start, Vg start]
  vg_end_v: [VG end, Vg end]
  vg_step_v: [VG step, Vg step]
  vsd_start_v: [VSD start, Vsd start]
  vsd_end_v: [VSD end, Vsd end]
  vsd_step_v: [VSD step, Vsd step]
  ids_a: [Drain-Source current]
  vrange: [Vrange]

  # Light/laser parameters
  wavelength_nm: [Laser wavelength, Wavelength]
  laser_voltage_V: [Laser voltage]
  laser_period_s: [Laser ON+OFF period]
  laser_voltage_start_v: [Laser voltage start]
  laser_voltage_end_v: [Laser voltage end]
  laser_voltage_step_v: [Laser voltage step]
  optical_fiber: [Optical fiber]
  sensor_model: [Sensor model]

  # Instrument settings
  nplc: [NPLC]
  n_avg: [N_avg]
  irange: [Irange]
  burn_in_time_s: [Burn-in time]
  step_time_s: [Step time]
  sampling_time_s: [Sampling time (excluding Keithley)]

  # Temperature parameters
  initial_temp_c: [Initial (current) T]
  target_temp_c: [Target T]
  temp_start_c: [T start]
  temp_end_c: [T end]
  temp_step_c: [T step]
  temp_step_start_time_s: [T step start time]

  # It2 3-phase durations
  phase1_duration_s: [Phase 1 duration (laser OFF)]
  phase2_duration_s: [Phase 2 duration (laser ON)]
  phase3_duration_s: [Phase 3 duration (laser OFF)]

  # Metadata fields
  sample: [Sample]
  information: [Information]

procedures:
  ITt:
    Parameters:
      Irange: float
      NPLC: int
      N_avg: int
      Chained execution: bool
      Chip group name: str
      Chip number: int
      Information: str
      Laser ON+OFF period: float
      Laser voltage: float
      Laser wavelength: float
      Procedure version: str
      Sample: str
      Sampling time (excluding Keithley): float
      Show more: bool
      VDS: float
      VG: float
      Pulse time: float
    Metadata:
      Start time: datetime
    Data:
      t (s): float
      I (A): float
      VL (V): float
      Plate T (degC): float
      Ambient T (degC): float
      Clock (ms): float

    Config:
      light_detection: standard

  IVg:
    Parameters:
      Irange: float
      N_avg: int
      Chained execution: bool
      NPLC: int
      Burn-in time: float
      Chip group name: str
      Chip number: int
      Information: str
      Laser toggle: bool
      Laser voltage: float
      Laser wavelength: float
      Procedure version: str
      Sample: str
      Show more: bool
      Step time: float
      VDS: float
      VG end: float
      VG start: float
      VG step: float
    Metadata:
      Start time: datetime
    Data:
      Vg (V): float
      I (A): float

    Config:
      light_detection: standard

  VVg:
    Parameters:
      NPLC: int
      Vrange: float
      Burn-in time: float
      Chip group name: str
      Chip number: int
      Drain-Source current: float
      Information: str
      Laser voltage: float
      Laser wavelength: float
      Procedure version: str
      Sample: str
      Step time: float
      VG end: float
      VG start: float
      VG step: float
    Metadata:
      Start time: datetime
    Data:
      Vg (V): float
      VDS (V): float
      t (s): float
      Plate T (degC): float
      Ambient T (degC): float
      Clock (ms): float

    Config:
      light_detection: standard

  IVgT:
    Parameters:
      Irange: float
      NPLC: int
      N_avg: int
      Burn-in time: float
      Chained execution: bool
      Chip group name: str
      Chip number: int
      Information: str
      Laser toggle: bool
      Laser voltage: float
      Laser wavelength: float_no_unit
      Procedure version: str
      Sample: str
      Show more: bool
      Step time: float
      VDS: float
      VG end: float
      VG start: float
      VG step: float
    Metadata:
      Start time: datetime
    Data:
      Vg (V): float
      I (A): float
      Plate T (degC): float
      Ambient T (degC): float
      Clock (ms): float

    Config:
      light_detection: standard

  It:
    Parameters:
      Irange: float
      N_avg: int
      NPLC: int
      Chip group name: str
      Chip number: int
      Information: str
      Laser ON+OFF period: float
      Laser voltage: float
      Laser wavelength: float
      Procedure version: str
      Sample: str
      Sampling time (excluding Keithley): float
      Show more: bool
      VDS: float
      VG: float
      T step start time: float
      Initial (current) T: float
      Target T: float
      Chained execution: bool
    Metadata:
      Start time: datetime
    Data:
      t (s): float
      I (A): float
      VL (V): float

    Config:
      light_detection: standard

  LaserCalibration:
    Parameters:
      N_avg: int
      Optical fiber: str
      Chained execution: bool
      Laser wavelength: float
      Procedure version: str
      Step time: float
      Laser voltage end: float
      Laser voltage start: float
      Laser voltage step: float
    Metadata:
      Start time: datetime
      Sensor model: str
    Data:
      VL (V): float
      Power (W): float

    Config:
      light_detection: laser_calibration
      requires_chip: false

  Tt:
    Parameters:
      Chained execution: bool
      Chip group name: str
      Chip number: int
      Information: str
      Initial (current) T: float
      Target T: float
      T start: float
      T end: float
      T step: float
      Step time: float
      Laser ON+OFF period: float
      Procedure version: str
      Sample: str
      Sampling time (excluding Keithley): float
      Show more: bool
    Metadata:
      Start time: datetime
    Data:
      Time (s): float
      Plate Temperature (degC): float
      Ambient Temperature (degC): float
      Clock: float

    Config:
      light_detection: none

  IV:
    Parameters:
      Irange: float
      NPLC: int
      N_avg: int
      Burn-in time: float
      Chained execution: bool
      Chip group name: str
      Chip number: int
      Information: str
      Laser toggle: bool
      Laser voltage: float
      Laser wavelength: float
      Procedure version: str
      Sample: str
      Show more: bool
      Step time: float
      VG: float
      VSD end: float
      VSD start: float
      VSD step: float
    Metadata:
      Start time: datetime
    Data:
      Vsd (V): float
      I (A): float
      t (s):
        type: float
        required: false

    Config:
      light_detection: standard

  It2:
    Parameters:
      Irange: float
      NPLC: int
      Chained execution: bool
      Chip group name: str
      Chip number: int
      Information: str
      Initial (current) T: float
      Phase 1 duration (laser OFF): float
      Phase 2 duration (laser ON): float
      Phase 3 duration (laser OFF): float
      Procedure version: str
      Sample: str
      Sampling time (excluding Keithley): float
      Show more: bool
      Target T: float
      T step start time: float
      Use temperature sensor: bool
      VDS: float
      VG: float
      Laser voltage: float
      Laser wavelength: float
      Laser toggle: bool
    Metadata:
      Start time: datetime
    Data:
      t (s): float
      I (A): float
      VL (V): float
      Plate T (degC): float
      Ambient T (degC): float
      Clock (ms): float

    Config:
      light_detection: standard

  ItVg:
    Parameters:
      Irange: float
      NPLC: int
      Burn-in time: float
      Chained execution: bool
      Chip group name: str
      Chip number: int
      Information: str
      Laser toggle: bool
      Laser voltage: float
      Laser wavelength: float
      Procedure version: str
      Sample: str
      Sampling time (excluding Keithley): float
      Show more: bool
      Step time: float
      VDS: float
      VG end: float
      VG start: float
      VG step: float
    Metadata:
      Start time: datetime
    Data:
      t (s): float
      I (A): float
      Vg (V): float

    Config:
      light_detection: standard

  ItWl:
    Parameters:
      Irange: float
      NPLC: int
      Burn-in time: float
      Chained execution: bool
      Chip group name: str
      Chip number: int
      Information: str
      Procedure version: str
      Sample: str
      Sampling time (excluding Keithley): float
      Show more: bool
      Step time: float
      VDS: float
      VG: float
      VG toggle: bool
      Wavelength: float
    Metadata:
      Start time: datetime
    Data:
      t (s): float
      I (A): float
      wl (nm): float

    Config:
      light_detection: standard

  Vt:
    Parameters:
      Vrange: float
      NPLC: int
      Chained execution: bool
      Chip group name: str
      Chip number: int
      Information: str
      Laser ON+OFF period: float
      Laser toggle: bool
      Laser voltage: float
      Laser wavelength: float
      Procedure version: str
      Sample: str
      Sampling time (excluding Keithley): float
      Show more: bool
      Drain-Source current: float
      VG: float
      Initial (current) T: float
      Target T: float
      T step start time: float
      Use temperature sensor: bool
    Metadata:
      Start time: datetime
    Data:
      t (s): float
      VDS (V): float
      VL (V): float
      Plate T (degC): float
      Ambient T (degC): float
      Clock (ms): float

    Config:
      light_detection: standard

  Pt:
    Parameters:
      Irange: float
      N_avg: int
      Chained execution: bool
      Information: str
      Laser ON+OFF period: float
      Laser voltage: float
      Laser wavelength: float
      Optical fiber: str
      Procedure version: str
      Sampling time (excluding Keithley): float
      Show more: bool
    Metadata:
      Start time: datetime
      Sensor model: str
    Data:
      t (s): float
      P (W): float
      VL (V): float

    Config:
      light_detection: standard

  Pwl:
    Parameters:
      N_avg: int
      Chained execution: bool
      Information: str
      Procedure version: str
      Sampling time (excluding Keithley): float
      Show more: bool
      Wavelength Step: float
      Start Wavelength: float
      End Wavelength: float
    Metadata:
      Start time: datetime
      Sensor model: str
    Data:
      Wavelength (nm): float
      Power (W): float
      Time (s): float

    Config:
      light_detection: none
